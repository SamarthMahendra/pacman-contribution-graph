var t={d:(n,e)=>{for(var a in e)t.o(e,a)&&!t.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)},n={};t.d(n,{C:()=>F});const e=52,a="yellow",o="#80808064",i=["blinky","clyde","inky","pinky"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=200,c={github:{textColor:"#586069",gridBackground:"#ffffff",contributionBoxColor:"#9be9a8",emptyContributionBoxColor:"#ebedf0"},"github-dark":{textColor:"#8b949e",gridBackground:"#0d1117",contributionBoxColor:"#26a641",emptyContributionBoxColor:"#161b22"},gitlab:{textColor:"#626167",gridBackground:"#ffffff",contributionBoxColor:"#7992f5",emptyContributionBoxColor:"#ececef"},"gitlab-dark":{textColor:"#999999",gridBackground:"#1f1f1f",contributionBoxColor:"#2e7db1",emptyContributionBoxColor:"#2d2d2d"}},g={blinky:{imgDate:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAfUlEQVQ4T+2TUQ7AIAhDy/0PzQIRAqxmLtnn/DJPWypBAVkKKOMCyOQN7IRElLrcnIrDLNK4wVtxNbkb6Hq+jOcSbim6QVzKEstkw92gxVeFrMpqokix4wA+NvCOnvfArvcEbHoe2G9QmmhDMUc65p3xYC6q3zQPxtdl3NgF5QpL/b/rs3IAAAAASUVORK5CYIIA"},clyde:{imgDate:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAgUlEQVQ4T+2T0Q6AIAhFLx9sH1MfTIPCAeLKrcd8PHqP4JBQLN7BFacNlHkAs+AQcqIueBs2mVWjgtWwl4yCdrd/pHYLLlVEgR2yK0wy4SoI5TcGXU4wM+AEJQfwsUCuXngDOR4rqKbngf0C94gyFHmkbd4rbkxD/pv2jfR1Ky7sBNrzXbHpnBX+AAAAAElFTkSuQmCC"},inky:{imgDate:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAg0lEQVQ4T+WTWxKAIAhFuQvK/a+jFoT5QAVxypn+6vMEx6sDIO/jk12OAMs1WDVOXV3UBW+bRVbTFMFu8yCZBExH/g26VHCXI0AJpKgdUCUrTlkwxE+FECdzS7HiJemXgvyeO29gE7jD8wDVFX4vSLNtR1q2z+OVlaZxTaXYrq7HbxYBS8VgMVrqzkEAAAAASUVORK5CYIIA"},pinky:{imgDate:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAhklEQVQ4T+2T0Q2AIAwF281wC50Qt9DNagoptqVESfyUz4N3vJCCECxaD4o47gt6bsAo2IWUqAnehkUmbYpgNqwlvSCnur+dtnnAuYUVyCGJimTAi8DUzwmwOoGI7hYjDgAfC/jqiTfg47ZBND0P7BeoR+Sh8CMt8x5xYSWkv2nbcF834swuA/9u49Yy5bgAAAAASUVORK5CYIIA"},scared:{imgDate:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAeUlEQVQ4T82TUQ6AMAhD7UX0/sdyF0GREVmDmTN+bH9r6Bs0A0t2VpFULwDrrfBkZFcA3YC3ZodViAFGzQHyP0B2w2NrB0/1AoDbHwLoQ5/nrw1OBuD5e/crbM9Aiz35njHWzpSB/m3+0r40mV41M8U19WJe3Uw/tQOKt08pUUbBEQAAAABJRU5ErkJgggAA"}};var u,d=function(t,n,e,a){return new(e||(e=Promise))((function(o,i){function s(t){try{c(a.next(t))}catch(t){i(t)}}function r(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,r)}c((a=a.apply(t,n||[])).next())}))};!function(t){t.DEFAULT="https://cdn.jsdelivr.net/npm/pacman-contribution-graph/src/assets/sounds/pacman_chomp.wav",t.BEGINNING="https://cdn.jsdelivr.net/npm/pacman-contribution-graph/src/assets/sounds/pacman_beginning.wav",t.GAME_OVER="https://cdn.jsdelivr.net/npm/pacman-contribution-graph/src/assets/sounds/pacman_death.wav",t.EAT_GHOST="https://cdn.jsdelivr.net/npm/pacman-contribution-graph/src/assets/sounds/pacman_eatghost.wav"}(u||(u={}));class l{constructor(){this.sounds=new Map,this.currentSource=null,this.defaultSource=null,this.isMuted=!1,this.audioContext=new AudioContext}static getInstance(){return l.instance||(l.instance=new l),l.instance}preloadSounds(){return d(this,void 0,void 0,(function*(){for(const t of Object.values(u)){const n=yield fetch(t),e=yield n.arrayBuffer(),a=yield this.audioContext.decodeAudioData(e);this.sounds.set(t,a)}}))}play(t){return d(this,void 0,void 0,(function*(){if(this.isMuted)return;if(this.currentSource)try{this.currentSource.stop()}catch(t){}const n=this.sounds.get(t);if(n)return this.currentSource=this.audioContext.createBufferSource(),this.currentSource.buffer=n,this.currentSource.connect(this.audioContext.destination),this.isMuted||this.currentSource.start(),new Promise((t=>{this.currentSource.onended=()=>{this.currentSource=null,t()}}));console.error(`Sound ${t} not found`)}))}startDefaultSound(){if(this.defaultSource)try{this.defaultSource.stop()}catch(t){}const t=this.sounds.get(u.DEFAULT);t?(this.defaultSource=this.audioContext.createBufferSource(),this.defaultSource.buffer=t,this.defaultSource.loop=!0,this.defaultSource.connect(this.audioContext.destination),this.isMuted||this.defaultSource.start()):console.error("Default sound not found")}stopDefaultSound(){if(this.defaultSource){try{this.defaultSource.stop()}catch(t){}this.defaultSource=null}}mute(){this.isMuted=!0,this.currentSource&&this.currentSource.disconnect(),this.defaultSource&&this.defaultSource.disconnect()}unmute(){this.isMuted=!1,this.currentSource&&this.currentSource.connect(this.audioContext.destination),this.defaultSource&&this.defaultSource.connect(this.audioContext.destination)}}var h=function(t,n,e,a){return new(e||(e=Promise))((function(o,i){function s(t){try{c(a.next(t))}catch(t){i(t)}}function r(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,r)}c((a=a.apply(t,n||[])).next())}))};const m=t=>{var n;return null!==(n=c[t.config.gameTheme])&&void 0!==n?n:c.github},f={},p=(t,n)=>{if(!f[t]){const e=new Image;e.src=n,f[t]=e}return f[t]},y=t=>{t.config.canvas.getContext("2d").fillStyle=m(t).gridBackground,t.config.canvas.getContext("2d").fillRect(0,0,t.config.canvas.width,t.config.canvas.height);for(let o=0;o<7;o++)for(let i=0;i<e;i++){const e=t.grid[o][i].intensity;if(e>0){const o=e<.2?.3:e,i=(n=m(t).contributionBoxColor,a=o,`rgba(${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}, ${a})`);t.config.canvas.getContext("2d").fillStyle=i}else t.config.canvas.getContext("2d").fillStyle=m(t).emptyContributionBoxColor;t.config.canvas.getContext("2d").beginPath(),t.config.canvas.getContext("2d").roundRect(22*i,22*o+15,20,20,5),t.config.canvas.getContext("2d").fill()}var n,a;t.config.canvas.getContext("2d").fillStyle=m(t).textColor,t.config.canvas.getContext("2d").font="10px Arial",t.config.canvas.getContext("2d").textAlign="center";let o="";for(let n=0;n<e;n++)if(t.monthLabels[n]!==o){const e=22*n+10;t.config.canvas.getContext("2d").fillText(t.monthLabels[n],e,10),o=t.monthLabels[n]}},v=t=>{const n=22*t.pacman.y+10,e=22*t.pacman.x+10+15;t.pacman.deadRemainingDuration?t.config.canvas.getContext("2d").fillStyle=o:t.pacman.powerupRemainingDuration?t.config.canvas.getContext("2d").fillStyle="red":t.config.canvas.getContext("2d").fillStyle=a;const i=t.pacmanMouthOpen?.35*Math.PI:.1*Math.PI;let s,r;switch(t.pacman.direction){case"up":s=1.5*Math.PI+i,r=1.5*Math.PI-i;break;case"down":s=.5*Math.PI+i,r=.5*Math.PI-i;break;case"left":s=Math.PI+i,r=Math.PI-i;break;default:s=0+i,r=2*Math.PI-i}t.config.canvas.getContext("2d").beginPath(),t.config.canvas.getContext("2d").arc(n,e,10,s,r),t.config.canvas.getContext("2d").lineTo(n,e),t.config.canvas.getContext("2d").fill()},A=t=>{t.ghosts.forEach((n=>{const e=22*n.y,a=22*n.x+15,o=t.config.canvas.getContext("2d");n.scared?o.drawImage(p("scared",g.scared.imgDate),e,a,20,20):o.drawImage(p(n.name,g[n.name].imgDate),e,a,20,20)}))},x=t=>{t.config.enableSounds&&t.config.canvas.addEventListener("click",(function(n){const e=t.config.canvas.getBoundingClientRect(),a=n.clientX-e.left,o=n.clientY-e.top,i=t.config.canvas.width-30-10;a>=i&&a<=i+this.width&&o>=10&&o<=10+this.height&&(l.getInstance().isMuted?l.getInstance().unmute():l.getInstance().mute())}))},b=t=>{const n=10,e=t,a=2*Math.PI-t;return`M 10,10\n            L ${n+n*Math.cos(e)},${n+n*Math.sin(e)}\n            A 10,10 0 1,1 ${n+n*Math.cos(a)},${n+n*Math.sin(a)}\n            Z`},C=(t,n,e)=>t.gameHistory.map((a=>{const o=a.grid[n][e];if(o>0){const n=o<.2?.3:o;return i=m(t).contributionBoxColor,s=n,3===(i=i.replace(/^#/,"")).length&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),`#${i}${Math.round(255*s).toString(16).padStart(2,"0")}`}var i,s;return m(t).emptyContributionBoxColor})),w=t=>{switch(t){case"blinky":return"gb";case"clyde":return"gc";case"inky":return"gi";case"pinky":return"gp";case"scared":return"gs";default:return t}},M=(t,n)=>{if(t.gameHistory.length!==n.length)throw new Error("The length of changingValues must match the length of gameHistory");const e=t.gameHistory.length;let a=[],o=[],i=null,s=null;return n.forEach(((t,n)=>{t!==i&&(null!==i&&null!==s&&n-1!==s&&(a.push(Number(((n-1e-6)/(e-1)).toFixed(6))),o.push(i)),a.push(Number((n/(e-1)).toFixed(6))),o.push(t),i=t,s=n)})),1!==a[a.length-1]&&(a.push(1),o.push(i)),{keyTimes:a.join(";"),values:o.join(";")}},S=t=>{let n='<svg width="1144" height="174" xmlns="http://www.w3.org/2000/svg">';n+=`<desc>Generated with https://github.com/abozanona/pacman-contribution-graph on ${new Date}</desc>`,n+=`<rect width="100%" height="100%" fill="${m(t).gridBackground}"/>`,n+=`<defs>\n\t\t<symbol id="${w("blinky")}" viewBox="0 0 100 100">\n            <image href="${g.blinky.imgDate}" width="100" height="100"/>\n\t\t</symbol>\n\t\t<symbol id="${w("clyde")}" viewBox="0 0 100 100">\n            <image href="${g.clyde.imgDate}" width="100" height="100"/>\n\t\t</symbol>\n\t\t<symbol id="${w("inky")}" viewBox="0 0 100 100">\n            <image href="${g.inky.imgDate}" width="100" height="100"/>\n\t\t</symbol>\n\t\t<symbol id="${w("pinky")}" viewBox="0 0 100 100">\n            <image href="${g.pinky.imgDate}" width="100" height="100"/>\n\t\t</symbol>\n\t\t<symbol id="${w("scared")}" viewBox="0 0 100 100">\n            <image href="${g.scared.imgDate}" width="100" height="100"/>\n\t\t</symbol>\n\t</defs>`;let i="";for(let a=0;a<e;a++)t.monthLabels[a]!==i&&(n+=`<text x="${22*a+10}" y="10" text-anchor="middle" font-size="10" fill="${m(t).textColor}">${t.monthLabels[a]}</text>`,i=t.monthLabels[a]);for(let a=0;a<7;a++)for(let o=0;o<e;o++){const e=22*o,i=22*a+15,s=M(t,C(t,a,o));n+=`<rect id="c-${a}-${o}" x="${e}" y="${i}" width="20" height="20" rx="5" fill="${m(t).emptyContributionBoxColor}">\n                <animate attributeName="fill" dur="${t.gameHistory.length*r}ms" repeatCount="indefinite" \n                    values="${s.values}" \n                    keyTimes="${s.keyTimes}"/>\n            </rect>`}const s=M(t,(t=>t.gameHistory.map((t=>t.pacman.deadRemainingDuration?o:t.pacman.powerupRemainingDuration?"red":a)))(t)),c=M(t,(t=>t.gameHistory.map((t=>`${22*t.pacman.y},${22*t.pacman.x+15}`)))(t)),u=M(t,(t=>t.gameHistory.map((t=>{switch(t.pacman.direction){case"right":default:return"0 10 10";case"left":return"180 10 10";case"up":return"270 10 10";case"down":return"90 10 10"}})))(t));return n+=`<path id="pacman" d="${b(.55)}"\n        >\n\t\t<animate attributeName="fill" dur="${t.gameHistory.length*r}ms" repeatCount="indefinite"\n            keyTimes="${s.keyTimes}"\n            values="${s.values}"/>\n        <animateTransform attributeName="transform" type="translate" dur="${t.gameHistory.length*r}ms" repeatCount="indefinite"\n            keyTimes="${c.keyTimes}"\n            values="${c.values}"\n            additive="sum"/>\n        <animateTransform attributeName="transform" type="rotate" dur="${t.gameHistory.length*r}ms" repeatCount="indefinite"\n            keyTimes="${u.keyTimes}"\n            values="${u.values}"\n            additive="sum"/>\n        <animate attributeName="d" dur="0.5s" repeatCount="indefinite"\n            values="${b(.55)};${b(.05)};${b(.55)}"/>\n    </path>`,t.ghosts.forEach(((e,a)=>{const o=M(t,((t,n)=>t.gameHistory.map((t=>{const e=t.ghosts[n];return`${22*e.y},${22*e.x+15}`})))(t,a)),i=M(t,((t,n)=>t.gameHistory.map((t=>{const e=t.ghosts[n];return"#"+(e.scared?w("scared"):w(e.name))})))(t,a));n+=`<use id="ghost${a}" width="20" height="20" href="#ghost-${e.name}">\n            <animateTransform attributeName="transform" type="translate" dur="${t.gameHistory.length*r}ms" repeatCount="indefinite"\n                keyTimes="${o.keyTimes}"\n                values="${o.values}"/>\n            <animate attributeName="href" dur="${t.gameHistory.length*r}ms" repeatCount="indefinite"\n                keyTimes="${i.keyTimes}"\n                values="${i.values}"/>\n        </use>`})),n+="</svg>",n};var D=function(t,n,e,a){return new(e||(e=Promise))((function(o,i){function s(t){try{c(a.next(t))}catch(t){i(t)}}function r(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,r)}c((a=a.apply(t,n||[])).next())}))};const I=t=>D(void 0,void 0,void 0,(function*(){if(t.frameCount++,t.frameCount%t.config.gameSpeed==0)if(t.pacman.deadRemainingDuration&&(t.pacman.deadRemainingDuration--,t.pacman.deadRemainingDuration||"canvas"==t.config.outputFormat&&l.getInstance().play(u.GAME_OVER).then((()=>l.getInstance().startDefaultSound()))),t.pacman.powerupRemainingDuration&&(t.pacman.powerupRemainingDuration--,t.pacman.powerupRemainingDuration||(t.ghosts.forEach((t=>t.scared=!1)),t.pacman.points=0)),t.grid.some((t=>t.some((t=>t.intensity>0)))))k(t),$(t),T(t),t.pacmanMouthOpen=!t.pacmanMouthOpen,t.gameHistory.push({pacman:Object.assign({},t.pacman),ghosts:t.ghosts.map((t=>Object.assign({},t))),grid:t.grid.map((t=>[...t.map((t=>t.intensity))]))}),"canvas"==t.config.outputFormat&&y(t),"canvas"==t.config.outputFormat&&v(t),"canvas"==t.config.outputFormat&&A(t),"canvas"==t.config.outputFormat&&(t=>{if(!t.config.enableSounds)return;const n=t.config.canvas.width-30-10;t.config.canvas.getContext("2d").fillStyle=`rgba(0, 0, 0, ${l.getInstance().isMuted?.3:.5})`,t.config.canvas.getContext("2d").beginPath(),t.config.canvas.getContext("2d").moveTo(n+10,20),t.config.canvas.getContext("2d").lineTo(n+20,15),t.config.canvas.getContext("2d").lineTo(n+20,35),t.config.canvas.getContext("2d").lineTo(n+10,30),t.config.canvas.getContext("2d").closePath(),t.config.canvas.getContext("2d").fill(),l.getInstance().isMuted?(t.config.canvas.getContext("2d").strokeStyle="rgba(255, 0, 0, 0.6)",t.config.canvas.getContext("2d").lineWidth=3,t.config.canvas.getContext("2d").beginPath(),t.config.canvas.getContext("2d").moveTo(n+25,15),t.config.canvas.getContext("2d").lineTo(n+5,35),t.config.canvas.getContext("2d").stroke()):(t.config.canvas.getContext("2d").strokeStyle="rgba(0, 0, 0, 0.4)",t.config.canvas.getContext("2d").lineWidth=2,t.config.canvas.getContext("2d").beginPath(),t.config.canvas.getContext("2d").arc(n+25,25,5,0,2*Math.PI),t.config.canvas.getContext("2d").stroke(),t.config.canvas.getContext("2d").beginPath(),t.config.canvas.getContext("2d").arc(n+25,25,8,0,2*Math.PI),t.config.canvas.getContext("2d").stroke())})(t);else{if("canvas"==t.config.outputFormat&&(clearInterval(t.gameInterval),"canvas"==t.config.outputFormat&&((t=>{t.config.canvas.getContext("2d").fillStyle=m(t).textColor,t.config.canvas.getContext("2d").font="20px Arial",t.config.canvas.getContext("2d").textAlign="center",t.config.canvas.getContext("2d").fillText("Game Over",t.config.canvas.width/2,t.config.canvas.height/2)})(t),l.getInstance().play(u.BEGINNING).then((()=>l.getInstance().stopDefaultSound())))),"svg"==t.config.outputFormat){const n=S(t);t.config.svgCallback(n)}t.config.gameOverCallback()}else t.gameHistory.push({pacman:Object.assign({},t.pacman),ghosts:t.ghosts.map((t=>Object.assign({},t))),grid:t.grid.map((t=>[...t.map((t=>t.intensity))]))})})),k=t=>{if(t.pacman.deadRemainingDuration)return;let n=[];if(t.pacman.powerupRemainingDuration)n=t.ghosts.map((t=>({x:t.x,y:t.y,distance:1/0})));else for(let a=0;a<7;a++)for(let o=0;o<e;o++)t.grid[a][o].intensity>0&&n.push({x:a,y:o,distance:1/0});if(0===n.length)return;const a=n.reduce(((n,e)=>{const a=Math.abs(e.x-t.pacman.x)+Math.abs(e.y-t.pacman.y);return a<n.distance?Object.assign(Object.assign({},e),{distance:a}):n}),{x:t.pacman.x,y:t.pacman.y,distance:1/0}),o=a.x-t.pacman.x,i=a.y-t.pacman.y;Math.abs(o)>Math.abs(i)?(t.pacman.x+=Math.sign(o),t.pacman.direction=o>0?"down":"up"):(t.pacman.y+=Math.sign(i),t.pacman.direction=i>0?"right":"left"),t.grid[t.pacman.x][t.pacman.y].intensity>0&&(t.pacman.totalPoints+=t.grid[t.pacman.x][t.pacman.y].commitsCount,t.pacman.points++,t.config.pointsIncreasedCallback(t.pacman.totalPoints),t.grid[t.pacman.x][t.pacman.y].intensity=0,t.pacman.points>=30&&O(t))},$=t=>{t.ghosts.forEach(((n,a)=>{if(n.scared){n.target||(n.target=B(n.x,n.y));const t=n.target.x-n.x,a=n.target.y-n.y,o=Math.abs(t)>Math.abs(a)?Math.sign(t):0,i=Math.abs(a)>=Math.abs(t)?Math.sign(a):0,s=n.x+o,r=n.y+i;s>=0&&s<7&&r>=0&&r<e&&(n.x=s,n.y=r),n.x===n.target.x&&n.y===n.target.y&&(n.target=B(n.x,n.y))}else{const a=[[-1,0],[1,0],[0,-1],[0,1]],[o,i]=a[Math.floor(Math.random()*a.length)];if(t.pacman.powerupRemainingDuration&&Math.random()<.5)return;const s=n.x+o,r=n.y+i;s>=0&&s<7&&r>=0&&r<e&&(n.x=s,n.y=r)}}))},B=(t,n)=>{const e=t+Math.floor(21*Math.random())-10,a=n+Math.floor(21*Math.random())-10;return{x:Math.max(0,Math.min(e,6)),y:Math.max(0,Math.min(a,51))}},T=t=>{t.pacman.deadRemainingDuration||t.ghosts.forEach(((n,e)=>{n.x===t.pacman.x&&n.y===t.pacman.y&&(t.pacman.powerupRemainingDuration&&n.scared?(E(t,e),t.pacman.points+=10,"canvas"==t.config.outputFormat&&l.getInstance().play(u.EAT_GHOST)):(t.pacman.points=0,t.pacman.powerupRemainingDuration=0,t.pacman.deadRemainingDuration=10,"canvas"==t.config.outputFormat&&l.getInstance().play(u.GAME_OVER).then((()=>l.getInstance().stopDefaultSound()))))}))},E=(t,n)=>{let a,o;do{a=Math.floor(7*Math.random()),o=Math.floor(Math.random()*e)}while(Math.abs(a-t.pacman.x)<=2&&Math.abs(o-t.pacman.y)<=2||0===t.grid[a][o].intensity);t.ghosts[n]={x:a,y:o,name:i[n%i.length],scared:!1,target:void 0}},O=t=>{t.pacman.powerupRemainingDuration=15,t.ghosts.forEach((t=>t.scared=!0))},R={frameCount:0,contributions:[],pacman:{x:0,y:0,direction:"right",points:0,totalPoints:0,deadRemainingDuration:0,powerupRemainingDuration:0},ghosts:[],grid:[],monthLabels:[],pacmanMouthOpen:!0,gameInterval:0,gameHistory:[],config:void 0};class F{constructor(t){this.store=Object.assign({},R),this.conf=Object.assign({},t)}start(){return t=this,n=void 0,o=function*(){switch(this.store.config=Object.assign(Object.assign({},{platform:"github",username:"",canvas:void 0,outputFormat:"svg",svgCallback:t=>{},gameOverCallback:()=>()=>{},gameTheme:"github",gameSpeed:1,enableSounds:!1,pointsIncreasedCallback:t=>{}}),this.conf),this.conf.platform){case"gitlab":this.store.contributions=yield(t=this.store,h(void 0,void 0,void 0,(function*(){const n=yield fetch(`https://v0-new-project-q1hhrdodoye-abozanona-gmailcoms-projects.vercel.app/api/contributions?username=${t.config.username}`),e=yield n.json();return Object.entries(e).map((([t,n])=>({date:new Date(t),count:Number(n)})))})));break;case"github":this.store.contributions=yield(t=>h(void 0,void 0,void 0,(function*(){var n;const e=[];let a=!1,o=1;do{try{const i={};(null===(n=t.config.githubSettings)||void 0===n?void 0:n.accessToken)&&(i.Authorization="Bearer "+t.config.githubSettings.accessToken);const s=yield fetch(`https://api.github.com/search/commits?q=author:${t.config.username}&sort=author-date&order=desc&page=${o}&per_page=1000`,{headers:i}),r=yield s.json();a=0===r.items.length,e.push(...r.items),o++}catch(t){a=!0}}while(!a);return Array.from(e.reduce(((t,n)=>{const e=n.commit.committer.date.split("T")[0],a=new Date(e),o=(t.get(e)||{count:0}).count+1;return t.set(e,{date:a,count:o})}),new Map).values())})))(this.store)}var t;(t=>{D(void 0,void 0,void 0,(function*(){"canvas"==t.config.outputFormat&&(t.config.canvas=t.config.canvas,(t=>{t.config.canvas.width=1144,t.config.canvas.height=174})(t),x(t)),t.frameCount=0,t.ghosts.forEach((t=>t.scared=!1)),(t=>{t.pacman.points=0,t.pacman.totalPoints=0,t.grid=Array.from({length:7},(()=>Array.from({length:e},(()=>({commitsCount:0,intensity:0}))))),t.monthLabels=Array(e).fill("");let n=1;const a=new Date,o=new Date(a);o.setDate(a.getDate()-a.getDay()),t.contributions.forEach((a=>{const i=new Date(a.date),s=i.getDay(),r=Math.floor((+o-+i)/6048e5);r>=0&&r<e&&s>=0&&s<7&&(t.grid[s][51-r]={commitsCount:a.count,intensity:0},a.count>n&&(n=a.count))}));for(let a=0;a<7;a++)for(let o=0;o<e;o++)t.grid[a][o].commitsCount>0&&(t.grid[a][o].intensity=t.grid[a][o].commitsCount/n);for(let n=0;n<e;n++){const e=51-n,a=new Date(o);a.setDate(a.getDate()-7*e),t.monthLabels[n]=s[a.getMonth()]}})(t),"canvas"==t.config.outputFormat&&y(t),"canvas"==t.config.outputFormat&&(t.config.enableSounds||l.getInstance().mute(),yield l.getInstance().preloadSounds(),l.getInstance().startDefaultSound(),yield l.getInstance().play(u.BEGINNING));const n=()=>t.grid.some((t=>t.some((t=>t.intensity>0))));if(n()&&((t=>{let n=[];for(let a=0;a<7;a++)for(let o=0;o<e;o++)t.grid[a][o].intensity>0&&n.push({x:a,y:o});if(n.length>0){const e=n[Math.floor(Math.random()*n.length)];t.pacman={x:e.x,y:e.y,direction:"right",points:0,totalPoints:0,deadRemainingDuration:0,powerupRemainingDuration:0}}"canvas"==t.config.outputFormat&&v(t)})(t),(t=>{t.ghosts=[];for(let n=0;n<4;n++){let a,o;do{a=Math.floor(7*Math.random()),o=Math.floor(Math.random()*e)}while(0===t.grid[a][o].intensity);t.ghosts.push({x:a,y:o,name:i[n],scared:!1,target:void 0})}"canvas"==t.config.outputFormat&&A(t)})(t)),"svg"==t.config.outputFormat){for(;n();)yield I(t);yield I(t)}else clearInterval(t.gameInterval),t.gameInterval=setInterval((()=>D(void 0,void 0,void 0,(function*(){return yield I(t)}))),r)}))})(this.store)},new((a=void 0)||(a=Promise))((function(e,i){function s(t){try{c(o.next(t))}catch(t){i(t)}}function r(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(t){t(n)}))).then(s,r)}c((o=o.apply(t,n||[])).next())}));var t,n,a,o}stop(){var t;t=this.store,D(void 0,void 0,void 0,(function*(){clearInterval(t.gameInterval)}))}}var N=n.C;export{N as PacmanRenderer};